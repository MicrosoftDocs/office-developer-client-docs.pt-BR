---
title: Pré-requisitos para amostras de código com base em WCF no projeto
manager: soliver
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 60d2afc8-10b6-465d-8ce8-c073da6e5054
description: Saiba mais informações para ajudá-lo a criar projetos no Visual Studio usando as amostras de código com base em WCF que estão incluídas nos tópicos de referência do Project Server Interface (PSI).
ms.openlocfilehash: 43700a9db4445dacf366c7ca2efe1bfb10914372
ms.sourcegitcommit: 9d60cd82b5413446e5bc8ace2cd689f683fb41a7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/11/2018
ms.locfileid: "19771178"
---
# <a name="prerequisites-for-wcf-based-code-samples-in-project"></a><span data-ttu-id="8dc6b-103">Pré-requisitos para amostras de código com base em WCF no projeto</span><span class="sxs-lookup"><span data-stu-id="8dc6b-103">Prerequisites for WCF-based code samples in Project</span></span>

<span data-ttu-id="8dc6b-104">Saiba mais informações para ajudá-lo a criar projetos no Visual Studio usando as amostras de código com base em WCF que estão incluídas nos tópicos de referência do Project Server Interface (PSI).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-104">Learn information to help you create projects in Visual Studio by using the WCF-based code samples that are included in the Project Server Interface (PSI) reference topics.</span></span>
   
<span data-ttu-id="8dc6b-105">Muitos dos exemplos de código com base em WCF incluídos na [referência do serviço de web e de biblioteca de classe do Project Server 2013](http://msdn.microsoft.com/library/ef1830e0-3c9a-4f98-aa0a-5556c298e7d1%28Office.15%29.aspx) foram criados para a documentação do desenvolvedor do Project 2010 e usam um formato padrão para serviços web do WCF.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-105">Many of the WCF-based code samples included in the [Project Server 2013 class library and web service reference](http://msdn.microsoft.com/library/ef1830e0-3c9a-4f98-aa0a-5556c298e7d1%28Office.15%29.aspx) were originally created for the Project 2010 developer documentation, and use a standard format for WCF web services.</span></span> <span data-ttu-id="8dc6b-106">As amostras ainda funcionam no Project Server 2013 e são projetadas para serem copiados para um aplicativo de console e executados como uma unidade completa.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-106">The samples still work in Project Server 2013 and are designed to be copied into a console application and run as a complete unit.</span></span> <span data-ttu-id="8dc6b-107">Exceções são observadas na amostra.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-107">Exceptions are noted in the sample.</span></span> 
  
<span data-ttu-id="8dc6b-108">Exemplos de código na documentação do desenvolvedor do Project 2013 permanecem inalterados a partir dos exemplos desenvolvidos para o Office Project Server 2007 usam serviços Web ASMX.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-108">Code samples in the Project 2013 developer documentation that are unchanged from the samples developed for Office Project Server 2007 use ASMX Web services.</span></span> <span data-ttu-id="8dc6b-109">As amostras com base em ASMX também podem ser adaptadas para usar os serviços WCF.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-109">The ASMX-based samples can also be adapted to use WCF services.</span></span> <span data-ttu-id="8dc6b-110">Este artigo mostra como usar as amostras com os serviços WCF.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-110">This article shows how to use the samples with WCF services.</span></span> <span data-ttu-id="8dc6b-111">Para obter informações sobre como usar as amostras com serviços da web ASMX, consulte [pré-requisitos para amostras de código com base em ASMX no projeto](prerequisites-for-asmx-based-code-samples-in-project.md).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-111">For information about how to use the samples with ASMX web services, see [Prerequisites for ASMX-based code samples in Project](prerequisites-for-asmx-based-code-samples-in-project.md).</span></span>
  
> [!NOTE]
> <span data-ttu-id="8dc6b-112">Se o modelo de objeto do cliente (CSOM) inclui os métodos que seu aplicativo requer, novos aplicativos devem ser desenvolvidos com o CSOM.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-112">If the client-side object model (CSOM) includes the methods that your application requires, new applications should be developed with the CSOM.</span></span> <span data-ttu-id="8dc6b-113">O CSOM permite que os aplicativos funcionar com o Project Online ou em uma instalação local do Project Server 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-113">The CSOM enables applications to work with Project Online or an on-premises installation of Project Server 2013.</span></span> <span data-ttu-id="8dc6b-114">Caso contrário, se o aplicativo usa a PSI, ele deve usar a interface WCF, que é a tecnologia que a Microsoft recomenda para comunicações de rede.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-114">Otherwise, if your application uses the PSI, it should use the WCF interface, which is the technology that we recommend for network communications.</span></span> <span data-ttu-id="8dc6b-115">Aplicativos que usam a interface ASMX ou a interface WCF podem trabalhar somente para instalações locais do Project Server 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-115">Applications that use the ASMX interface or the WCF interface can work only for on-premises installations of Project Server 2013.</span></span> 
>
> <span data-ttu-id="8dc6b-116">Para obter mais informações sobre o CSOM, consulte [arquitetura do Project Server 2013](project-server-2013-architecture.md) e [o modelo de objeto do lado do cliente (CSOM) para o Project 2013](client-side-object-model-csom-for-project-2013.md).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-116">For more information about the CSOM, see [Project Server 2013 architecture](project-server-2013-architecture.md) and [Client-side object model (CSOM) for Project 2013](client-side-object-model-csom-for-project-2013.md).</span></span> 
  
<span data-ttu-id="8dc6b-117">Antes de executar os exemplos de código, você deve configurar o ambiente de desenvolvimento, configure o aplicativo, adicione um arquivo de configuração do serviço (ou configurar os serviços WCF programaticamente) e alterar valores de constantes genéricos para coincidir com o seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-117">Before running the code samples, you must set up the development environment, configure the application, add a service configuration file (or configure the WCF services programmatically), and change generic constant values to match your environment.</span></span>
  
## <a name="setting-up-the-development-environment"></a><span data-ttu-id="8dc6b-118">Configurar o ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="8dc6b-118">Setting up the development environment</span></span>
<span data-ttu-id="8dc6b-119"><a name="pj15_PrerequisitesWCF_Setup"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-119"></span></span>

1. <span data-ttu-id="8dc6b-120">**Configure um teste de sistema do Project Server.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-120">**Set up a test Project Server system.**</span></span>
    
    <span data-ttu-id="8dc6b-121">Use um teste de sistema do Project Server sempre que você estiver desenvolvendo ou teste.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-121">Use a test Project Server system whenever you are developing or testing.</span></span> <span data-ttu-id="8dc6b-122">Mesmo quando seu código funciona perfeitamente, dependências interproject, relatórios ou outros fatores ambientais podem causar consequências indesejadas.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-122">Even when your code works perfectly, interproject dependencies, reporting, or other environmental factors can cause unintended consequences.</span></span> 
    
    > [!NOTE]
    > <span data-ttu-id="8dc6b-123">Certifique-se de que você é um usuário válido no servidor e verifique se você tem permissões suficientes para as chamadas PSI que usa seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-123">Ensure that you are a valid user on the server, and check that you have sufficient permissions for the PSI calls that your application uses.</span></span> <span data-ttu-id="8dc6b-124">O tópico de documentação do desenvolvedor para cada método PSI inclui uma tabela de permissões do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-124">The developer documentation topic for each PSI method includes a Project Server Permissions table.</span></span> <span data-ttu-id="8dc6b-125">Por exemplo, o método [Project.QueueCreateProject](https://msdn.microsoft.com/library/WebSvcProject.Project.QueueCreateProject.aspx) requer a permissão **NewProject** global e a permissão de **SaveProjectTemplate** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-125">For example, the [Project.QueueCreateProject](https://msdn.microsoft.com/library/WebSvcProject.Project.QueueCreateProject.aspx) method requires the global **NewProject** permission and the **SaveProjectTemplate** permission.</span></span> 
  
    <span data-ttu-id="8dc6b-126">Em alguns casos, você pode precisar fazer a depuração remota no servidor.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-126">In some cases, you may have to do remote debugging on the server.</span></span> <span data-ttu-id="8dc6b-127">Você também pode ter que configurar um manipulador de eventos instalando um assembly do manipulador de eventos em cada computador do Project Server no farm do SharePoint e, em seguida, configurando o manipulador de eventos para a instância do Project Web App usando a página de configurações do Project Server em geral Configurações de aplicativos da Administração Central do SharePoint.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-127">You may also have to set up an event handler by installing an event handler assembly on each Project Server computer in the SharePoint farm, and then configuring the event handler for the Project Web App instance by using the Project Server Settings page in the General Application Settings of SharePoint Central Administration.</span></span>
    
2. <span data-ttu-id="8dc6b-128">**Configure um computador de desenvolvimento.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-128">**Set up a development computer.**</span></span>
    
    <span data-ttu-id="8dc6b-129">Você geralmente pode acessar a PSI através de uma rede.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-129">You usually access the PSI through a network.</span></span> <span data-ttu-id="8dc6b-130">Os exemplos de código são projetados para ser executado em um cliente separado do servidor, exceto onde observado.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-130">The code samples are designed to be run on a client that is separate from the server, except where noted.</span></span>
    
    1. <span data-ttu-id="8dc6b-131">**Instale a versão correta do Visual Studio.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-131">**Install the correct version of Visual Studio.**</span></span> <span data-ttu-id="8dc6b-132">Exceto quando observado, as amostras de código são escritas em Visual c#.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-132">Except where noted, the code samples are written in Visual C#.</span></span> <span data-ttu-id="8dc6b-133">Eles podem ser usados com o Visual Studio 2010 ou Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-133">They can be used with Visual Studio 2010 or Visual Studio 2012.</span></span> <span data-ttu-id="8dc6b-134">Certifique-se de que você tenha o service pack mais recente instalado.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-134">Ensure that you have the most recent service pack installed.</span></span> 
    
    2. <span data-ttu-id="8dc6b-135">**Copie DLLs do Project Server no computador de desenvolvimento.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-135">**Copy Project Server DLLs to the development computer.**</span></span> <span data-ttu-id="8dc6b-136">Copie os seguintes assemblies de `[Program Files]\Microsoft Office Servers\15.0\Bin` no computador do Project Server no computador de desenvolvimento:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-136">Copy the following assemblies from  `[Program Files]\Microsoft Office Servers\15.0\Bin` on the Project Server computer to the development computer:</span></span> 
    
       - <span data-ttu-id="8dc6b-137">Microsoft.Office.Project.Server.Events.Receivers.dll</span><span class="sxs-lookup"><span data-stu-id="8dc6b-137">Microsoft.Office.Project.Server.Events.Receivers.dll</span></span>
    
       - <span data-ttu-id="8dc6b-138">Microsoft.Office.Project.Server.Library.dll</span><span class="sxs-lookup"><span data-stu-id="8dc6b-138">Microsoft.Office.Project.Server.Library.dll</span></span>
    
    3. <span data-ttu-id="8dc6b-139">Para obter informações sobre como compilar e usar o assembly de proxy ProjectServerServices.dll para os serviços WCF na PSI, consulte [usando um assembly de proxy PSI e descrições de IntelliSense](#pj15_PrerequisitesWCF_BuildingProxy).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-139">For information about how to compile and use the ProjectServerServices.dll proxy assembly for the WCF services in the PSI, see [Using a PSI proxy assembly and IntelliSense descriptions](#pj15_PrerequisitesWCF_BuildingProxy).</span></span>
    
3. <span data-ttu-id="8dc6b-140">**Instale os arquivos IntelliSense.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-140">**Install the IntelliSense files.**</span></span>
    
    <span data-ttu-id="8dc6b-141">Para usar o IntelliSense descrições para classes e membros em assemblies do Project Server, copiar os arquivos XML IntelliSense atualizados do Project 2013 SDK baixar para o mesmo diretório onde os assemblies do Project Server estão localizados.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-141">To use IntelliSense descriptions for classes and members in Project Server assemblies, copy the updated IntelliSense XML files from the Project 2013 SDK download to the same directory where the Project Server assemblies are located.</span></span> <span data-ttu-id="8dc6b-142">Por exemplo, copie o arquivo de Microsoft.Office.Project.Server.Library.xml para o diretório onde o seu aplicativo será definida uma referência para o assembly Microsoft.Office.Project.Server.Library.dll.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-142">For example, copy the Microsoft.Office.Project.Server.Library.xml file to the directory where your application will set a reference to the Microsoft.Office.Project.Server.Library.dll assembly.</span></span>
    
    <span data-ttu-id="8dc6b-143">Descrições de IntelliSense para os serviços PSI exigem que você crie um assembly de proxy PSI usando o script CompileWCFProxyAssembly.cmd a `Documentation\IntelliSense\WCF` subdiretório no download do SDK do Project 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-143">IntelliSense descriptions for the PSI services require that you create a PSI proxy assembly by using the CompileWCFProxyAssembly.cmd script in the  `Documentation\IntelliSense\WCF` subdirectory in the Project 2013 SDK download.</span></span> <span data-ttu-id="8dc6b-144">O script cria o assembly de proxy ProjectServerServices.dll com base em WCF.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-144">The script creates the WCF-based ProjectServerServices.dll proxy assembly.</span></span> <span data-ttu-id="8dc6b-145">Para obter mais informações, consulte o arquivo. mht [ReadMe_IntelliSense] no download do SDK.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-145">For more information, see the [ReadMe_IntelliSense].mht file in the SDK download.</span></span> 
    
## <a name="creating-the-application-and-adding-a-service-reference"></a><span data-ttu-id="8dc6b-146">Criando o aplicativo e adicionando uma referência de serviço</span><span class="sxs-lookup"><span data-stu-id="8dc6b-146">Creating the application and adding a service reference</span></span>
<span data-ttu-id="8dc6b-147"><a name="pj15_PrerequisitesWCF_Configure"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-147"></span></span>

1. <span data-ttu-id="8dc6b-148">**Crie um aplicativo de console.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-148">**Create a console application.**</span></span>
    
    <span data-ttu-id="8dc6b-149">Quando você cria um aplicativo de console, na lista suspensa da caixa de diálogo **Novo projeto** , selecione o **.NET Framework 4**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-149">When you create a console application, in the drop-down list of the **New Project** dialog box, select **.NET Framework 4**.</span></span> <span data-ttu-id="8dc6b-150">Você pode copiar o código de exemplo PSI para o novo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-150">You can copy the PSI example code into the new application.</span></span>
    
2. <span data-ttu-id="8dc6b-151">**Adicione referências necessárias para WCF.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-151">**Add references required for WCF.**</span></span>
    
    <span data-ttu-id="8dc6b-152">No Solution Explorer, adicione uma referência ao **ServiceModel** (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-152">In Solution Explorer, add a reference to **System.ServiceModel** (see Figure 1).</span></span> <span data-ttu-id="8dc6b-153">**System.ServiceModel.Web**deverão ser usadas por um aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-153">A web application would use **System.ServiceModel.Web**.</span></span>
    
    <span data-ttu-id="8dc6b-154">Também adicione uma referência ao **System.Runtime.Serialization**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-154">Also add a reference to **System.Runtime.Serialization**.</span></span>
    
    <span data-ttu-id="8dc6b-155">**Figura 1. Adicionando as referências no Visual Studio para um aplicativo baseado em WCF**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-155">**Figure 1. Adding the references in Visual Studio for a WCF-based application**</span></span>

    <span data-ttu-id="8dc6b-156">![Adicionar referências para WCF] (media/pj15_PrerequisitesWCF_AddReference.gif "Adicionar referências para WCF")</span><span class="sxs-lookup"><span data-stu-id="8dc6b-156">![Adding references for WCF](media/pj15_PrerequisitesWCF_AddReference.gif "Adding references for WCF")</span></span>
  
3. <span data-ttu-id="8dc6b-157">**Copie o código**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-157">**Copy the code**.</span></span>
    
    <span data-ttu-id="8dc6b-158">Copie o exemplo de código completo para o arquivo de Module. vb do aplicativo de console.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-158">Copy the complete code example into the Program.cs file of the console application.</span></span>
    
4. <span data-ttu-id="8dc6b-159">**Defina o namespace para o aplicativo de exemplo.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-159">**Set the namespace for the sample application.**</span></span>
    
    <span data-ttu-id="8dc6b-160">Você pode alterar o namespace listado na parte superior da amostra para o namespace padrão de aplicativo, ou alterar o namespace do aplicativo padrão para corresponder a amostra.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-160">You can either change the namespace listed at the top of the sample to the application default namespace, or change the default application namespace to match the sample.</span></span> <span data-ttu-id="8dc6b-161">Você pode alterar o namespace do aplicativo padrão, alterando as propriedades do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-161">You can change the default application namespace by changing the application properties.</span></span> 
    
    <span data-ttu-id="8dc6b-162">Por exemplo, o exemplo de código para [ReadResource](https://msdn.microsoft.com/library/WebSvcResource.Resource.ReadResource.aspx) tem o namespace **Microsoft.SDK.Project.Samples.CreateResourceTest**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-162">For example, the code sample for [ReadResource](https://msdn.microsoft.com/library/WebSvcResource.Resource.ReadResource.aspx) has the namespace **Microsoft.SDK.Project.Samples.CreateResourceTest**.</span></span> <span data-ttu-id="8dc6b-163">Se o nome do projeto do Visual Studio for **ResourceTest**, copie o namespace do arquivo Module. vb e abra o painel de **Propriedades** do projeto (no menu **projeto** , escolha **Propriedades ResourceTest**).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-163">If the name of the Visual Studio project is **ResourceTest**, copy the namespace from the Program.cs file, and then open the project **Properties** pane (on the **Project** menu, choose **ResourceTest Properties**).</span></span> <span data-ttu-id="8dc6b-164">Na guia **aplicativo** , copie o namespace na caixa de texto **namespace padrão** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-164">On the **Application** tab, copy the namespace into the **Default namespace** text box.</span></span> 
    
5. <span data-ttu-id="8dc6b-165">**Defina as referências de serviço.**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-165">**Set the service references.**</span></span>
    
    <span data-ttu-id="8dc6b-166">Exemplos de muitos requerem uma referência a um ou mais dos serviços PSI.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-166">Many examples require a reference to one or more of the PSI services.</span></span> <span data-ttu-id="8dc6b-167">Eles são listados na amostra de si mesmo ou em comentários que precedem a amostra.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-167">These are listed in the sample itself or in comments that precede the sample.</span></span> <span data-ttu-id="8dc6b-168">Para obter o namespace correto das referências de serviço, certifique-se de que, primeiro, você definir o namespace do aplicativo padrão.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-168">To get the correct namespace of the service references, ensure that you first set the default application namespace.</span></span>
    
    <span data-ttu-id="8dc6b-169">Há três maneiras de adicionar uma referência de serviço WCF:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-169">There are three ways to add a WCF service reference:</span></span>
    
    - <span data-ttu-id="8dc6b-170">Crie um conjunto de proxy PSI denominado ProjectServerServices.dll e, em seguida, defina uma referência para o assembly.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-170">Build a PSI proxy assembly named ProjectServerServices.dll, and then set a reference to the assembly.</span></span> <span data-ttu-id="8dc6b-171">Consulte [usando um assembly de proxy PSI e descrições de IntelliSense](#pj15_PrerequisitesWCF_BuildingProxy).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-171">See [Using a PSI proxy assembly and IntelliSense descriptions](#pj15_PrerequisitesWCF_BuildingProxy).</span></span>
    
    - <span data-ttu-id="8dc6b-172">Adicione um arquivo de proxy de saída svcutil.exe e a solução do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-172">Add a proxy file from the svcutil.exe output to the Visual Studio solution.</span></span> <span data-ttu-id="8dc6b-173">Consulte [Adicionando um arquivo de proxy PSI](#pj15_PrerequisitesWCF_AddingProxyFile).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-173">See [Adding a PSI proxy file](#pj15_PrerequisitesWCF_AddingProxyFile).</span></span>
    
    - <span data-ttu-id="8dc6b-174">Adicione uma referência de serviço usando o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-174">Add a service reference by using Visual Studio.</span></span> <span data-ttu-id="8dc6b-175">Consulte [Adicionando uma referência de serviço](#pj15_PrerequisitesWCF_AddingServiceReference).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-175">See [Adding a service reference](#pj15_PrerequisitesWCF_AddingServiceReference).</span></span>
    
### <a name="using-a-psi-proxy-assembly-and-intellisense-descriptions"></a><span data-ttu-id="8dc6b-176">Usando um assembly de proxy PSI e descrições de IntelliSense</span><span class="sxs-lookup"><span data-stu-id="8dc6b-176">Using a PSI proxy assembly and IntelliSense descriptions</span></span>
<span data-ttu-id="8dc6b-177"><a name="pj15_PrerequisitesWCF_BuildingProxy"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-177"></span></span>

<span data-ttu-id="8dc6b-178">Você pode usar um assembly de proxy para todos os serviços WCF públicos na PSI.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-178">You can use a proxy assembly for all public WCF services in the PSI.</span></span> <span data-ttu-id="8dc6b-179">Compilar o assembly de proxy ProjectServerServices.dll usando o `Documentation\IntelliSense\WCF\CompileWCFProxyAssembly.cmd` script no download do SDK do Project 2013 e, em seguida, copie o assembly de proxy para seu computador de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-179">Compile the ProjectServerServices.dll proxy assembly by using the  `Documentation\IntelliSense\WCF\CompileWCFProxyAssembly.cmd` script in the Project 2013 SDK download, and then copy the proxy assembly to your development computer.</span></span> <span data-ttu-id="8dc6b-180">Copie o arquivo de ProjectServerServices.xml para IntelliSense no mesmo local.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-180">Copy the ProjectServerServices.xml file for IntelliSense to the same location.</span></span> <span data-ttu-id="8dc6b-181">No Visual Studio, defina uma referência para o assembly de proxy ProjectServerServices.dll.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-181">In Visual Studio, set a reference to the ProjectServerServices.dll proxy assembly.</span></span> 
  
<span data-ttu-id="8dc6b-182">Para o Project Server service packs e atualizações, você pode atualizar os arquivos de origem de proxy e criar um novo conjunto de proxy usando o script GenWCFProxyAssembly.cmd na mesma pasta de download do SDK.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-182">For Project Server service packs and updates, you can update the proxy source files and create a new proxy assembly by using the GenWCFProxyAssembly.cmd script in the same SDK download folder.</span></span> <span data-ttu-id="8dc6b-183">Para um link para o download do SDK, consulte a [documentação do desenvolvedor do Project 2013](project-2013-developer-documentation.md).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-183">For a link to the SDK download, see [Project 2013 developer documentation](project-2013-developer-documentation.md).</span></span> <span data-ttu-id="8dc6b-184">Para obter mais informações, consulte a seção [Adicionando uma referência de serviço](#pj15_PrerequisitesWCF_AddingServiceReference) .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-184">For more information, see the [Adding a service reference](#pj15_PrerequisitesWCF_AddingServiceReference) section.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="8dc6b-185">Quando você extrair os arquivos de origem do proxy do Source.zip de arquivo, os arquivos no `Documentation\IntelliSense\WCF\Source` pasta são atuais a partir da data de publicação do download do SDK do Project 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-185">When you extract the proxy source files from the Source.zip file, the files in the  `Documentation\IntelliSense\WCF\Source` folder are current as of the publication date of the Project 2013 SDK download.</span></span> <span data-ttu-id="8dc6b-186">Para gerar atualizado arquivos de origem do proxy PSI, executados o script de GenASMXProxyAssembly.cmd no computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-186">To generate updated PSI proxy source files, run the GenASMXProxyAssembly.cmd script on the Project Server computer.</span></span> <span data-ttu-id="8dc6b-187">Para obter mais informações, consulte [Adicionando uma referência de serviço](#pj15_PrerequisitesWCF_AddingServiceReference).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-187">For more information, see [Adding a service reference](#pj15_PrerequisitesWCF_AddingServiceReference).</span></span> 
> 
> <span data-ttu-id="8dc6b-188">Os scripts no `Documentation\IntelliSense\ASMX` pasta não funcionam para aplicativos baseados no WCF.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-188">The scripts in the  `Documentation\IntelliSense\ASMX` folder do not work for WCF-based applications.</span></span> <span data-ttu-id="8dc6b-189">O script GenASMXProxyAssembly.cmd chama Wsdl.exe, que gera arquivos código-fonte para os serviços ASMX.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-189">The GenASMXProxyAssembly.cmd script calls Wsdl.exe, which generates source code files for the ASMX services.</span></span> <span data-ttu-id="8dc6b-190">Os arquivos de proxy ASMX incluem diferentes classes e propriedades.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-190">The ASMX proxy files include different classes and properties.</span></span> <span data-ttu-id="8dc6b-191">Por exemplo, o serviço da web com base em ASMX recurso inclui a classe de **recurso** , enquanto o serviço de recursos com base em WCF inclui a interface de **recurso** , a interface **ResourceChannel** e a classe **ResourceClient** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-191">For example, the ASMX-based Resource web service includes the **Resource** class, whereas the WCF-based Resource service includes the **Resource** interface, the **ResourceChannel** interface, and the **ResourceClient** class.</span></span> 
  
<span data-ttu-id="8dc6b-192">Os espaços para nome arbitrários criados para os serviços WCF e os serviços da web ASMX são os mesmos, para que o arquivo de ProjectServerServices.xml para IntelliSense funciona com qualquer assembly.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-192">The arbitrary namespaces created for both the ASMX web services and the WCF services are the same, so that the ProjectServerServices.xml file for IntelliSense works with either assembly.</span></span> <span data-ttu-id="8dc6b-193">Por exemplo, o namespace do serviço de recurso no assembly proxy com base em WCF e no assembly com base em ASMX proxy é **SvcResource**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-193">For example, the namespace of the Resource service in the WCF-based proxy assembly and in the ASMX-based proxy assembly is **SvcResource**.</span></span> <span data-ttu-id="8dc6b-194">Obviamente, você pode alterar os nomes de namespace — se você garantir que elas correspondam no assembly proxy e no arquivo ProjectServerServices.xml IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-194">You can, of course, change the namespace names— if you ensure that they match in the proxy assembly and in the ProjectServerServices.xml IntelliSense file.</span></span>
  
<span data-ttu-id="8dc6b-195">Se um exemplo de código usa um nome diferente para um namespace de serviço PSI, por exemplo **ProjectWebSvc**, para o IntelliSense funcione, você deve alterar a amostra para usar **SvcProject** para que o namespace corresponde o assembly de proxy.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-195">If a code sample uses a different name for a PSI service namespace, for example **ProjectWebSvc**, for IntelliSense to work you must change the sample to use **SvcProject** so that the namespace matches the proxy assembly.</span></span> 
  
<span data-ttu-id="8dc6b-196">As vantagens de usar o assembly de proxy com base em WCF incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-196">Advantages to using the WCF-based proxy assembly include the following:</span></span>
  
- <span data-ttu-id="8dc6b-197">Você pode desenvolver a maioria das soluções com o assembly de proxy em um computador diferente do computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-197">You can develop most solutions with the proxy assembly on a different computer than the Project Server computer.</span></span> <span data-ttu-id="8dc6b-198">Definindo uma referência de serviço individuais requer o desenvolvimento no computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-198">Setting an individual service reference requires development on the Project Server computer.</span></span>
    
- <span data-ttu-id="8dc6b-199">O assembly de proxy inclui todos os namespaces de serviço PSI, portanto você não precisa adicionar vários arquivos de proxy.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-199">The proxy assembly includes all PSI service namespaces, so you do not have to add multiple proxy files.</span></span>
    
- <span data-ttu-id="8dc6b-200">Se você adicionar o arquivo ProjectServerServices.xml no mesmo diretório onde você pode definir uma referência para o assembly de proxy ProjectServerServices.dll, você pode obter descrições IntelliSense para as classes PSI e membros.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-200">If you add the ProjectServerServices.xml file to the same directory where you set a reference to the ProjectServerServices.dll proxy assembly, you can get IntelliSense descriptions for the PSI classes and members.</span></span> <span data-ttu-id="8dc6b-201">Para obter mais informações, consulte o arquivo [ReadMe_IntelliSense] no `Documentation\IntelliSense` pasta do download do SDK do Project 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-201">For more information, see the [ReadMe_IntelliSense] file in the  `Documentation\IntelliSense` folder of the Project 2013 SDK download.</span></span> 
    
<span data-ttu-id="8dc6b-202">**Figura 2. Usando o IntelliSense para um método no serviço de recurso**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-202">**Figure 2. Using IntelliSense for a method in the Resource service**</span></span>

<span data-ttu-id="8dc6b-203">![Usando o Intellisense para o método ReadResource] (media/pj15_PrerequisitesWCF_Intellisense.gif "Usando o Intellisense para o método ReadResource")</span><span class="sxs-lookup"><span data-stu-id="8dc6b-203">![Using Intellisense for the ReadResource method](media/pj15_PrerequisitesWCF_Intellisense.gif "Using Intellisense for the ReadResource method")</span></span>
  
<span data-ttu-id="8dc6b-204">Desvantagens de usar o assembly de proxy são que a solução é maior e você deve distribuir e instalar o assembly do proxy com a solução.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-204">Disadvantages to using the proxy assembly are that the solution is larger and you must distribute and install the proxy assembly with the solution.</span></span> <span data-ttu-id="8dc6b-205">Você também deve usar os mesmos namespaces que estão no assembly de proxy e arquivos IntelliSense, a menos que você altere o script para criar um assembly de proxy e alterar o arquivo de ProjectServerServices.xml IntelliSense para usar espaços para nome diferentes.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-205">You must also use the same namespaces that are in the proxy assembly and IntelliSense files, unless you change the script to build a proxy assembly and change the ProjectServerServices.xml IntelliSense file to use different namespaces.</span></span>
  
### <a name="adding-a-psi-proxy-file"></a><span data-ttu-id="8dc6b-206">Adicionando um arquivo de proxy PSI</span><span class="sxs-lookup"><span data-stu-id="8dc6b-206">Adding a PSI proxy file</span></span>
<span data-ttu-id="8dc6b-207"><a name="pj15_PrerequisitesWCF_AddingProxyFile"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-207"></span></span>

<span data-ttu-id="8dc6b-208">O download do SDK do Project 2013 inclui os arquivos de origem que são gerados pelo comando SvcUtil.exe para o assembly de proxy.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-208">The Project 2013 SDK download includes the source files that are generated by the SvcUtil.exe command for the proxy assembly.</span></span> <span data-ttu-id="8dc6b-209">Os arquivos de origem estão no arquivo Source.zip no `Documentation\IntelliSense\WCF` subdiretório.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-209">The source files are in the Source.zip file in the  `Documentation\IntelliSense\WCF` subdirectory.</span></span> <span data-ttu-id="8dc6b-210">Em vez de definir uma referência para o assembly de proxy, você pode adicionar um ou mais dos arquivos de origem para uma solução do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-210">Instead of setting a reference to the proxy assembly, you can add one or more of the source files to a Visual Studio solution.</span></span> <span data-ttu-id="8dc6b-211">Por exemplo, para usar o serviço de projeto e o serviço de recursos, adicione o wcf. Project.cs e wcf. Arquivos de Resource.cs à solução.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-211">For example, to use the Project service and the Resource service, add the wcf.Project.cs and wcf.Resource.cs files to the solution.</span></span> 
  
<span data-ttu-id="8dc6b-212">No WCF, a classe principal em cada serviço PSI é definida por uma interface e implementada em uma classe de cliente para o acesso aos membros.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-212">In WCF, the primary class in each PSI service is defined by an interface and implemented in a client class for access to the members.</span></span> <span data-ttu-id="8dc6b-213">Por exemplo, a interface de **SvcProject.Resource** é implementada na classe **SvcProject.ResourceClient** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-213">For example, the **SvcProject.Resource** interface is implemented in the **SvcProject.ResourceClient** class.</span></span> <span data-ttu-id="8dc6b-214">Para definir um objeto **ResourceClient** como uma variável de classe denominada **resourceClient**, por exemplo, use o código a seguir.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-214">To define a **ResourceClient** object as a class variable named **resourceClient**, for example, use the following code.</span></span> <span data-ttu-id="8dc6b-215">No exemplo, o método **SetClientEndpoints** cria um objeto de **resourceClient** que usa o ponto de extremidade **basicHttp_Project** , que é definido no arquivo App. config XML.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-215">In the example, the **SetClientEndpoints** method creates a **resourceClient** object that uses the **basicHttp_Project** endpoint, which is defined in the app.config file.</span></span> <span data-ttu-id="8dc6b-216">Para obter mais informações sobre o arquivo App, consulte a seção [Adicionando um arquivo de configuração do serviço](#pj15_PrerequisitesWCF_AddConfig) .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-216">For more information about the app.config file, see the [Adding a service configuration file](#pj15_PrerequisitesWCF_AddConfig) section.</span></span> 
  
```cs
private static SvcResource.ResourceClient resourceClient;
. . .
private static void SetClientEndpoints()
{
  resourceClient = new SvcResource.ResourceClient("basicHttp_Resource");
  . . .
}
public void DisposeClients()
{
  resourceClient.Close();
  . . .
}
```

> [!NOTE]
> <span data-ttu-id="8dc6b-217">Se você usar um assembly de proxy PSI ou adiciona um arquivo de proxy para obter uma referência de serviço do projeto chamado **SvcResource**, você usaria o mesmo código para criar e dispor de um objeto **resourceClient** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-217">Whether you use a PSI proxy assembly or add a proxy file for a Project service reference named **SvcResource**, you would use the same code to create and dispose a **resourceClient** object.</span></span> 
  
### <a name="adding-a-service-reference"></a><span data-ttu-id="8dc6b-218">Adding a service reference</span><span class="sxs-lookup"><span data-stu-id="8dc6b-218">Adding a service reference</span></span>
<span data-ttu-id="8dc6b-219"><a name="pj15_PrerequisitesWCF_AddingServiceReference"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-219"></span></span>

<span data-ttu-id="8dc6b-220">Se você não usar o assembly de proxy com base em WCF ou adicionar um arquivo de proxy para um serviço PSI, você pode definir uma ou mais referências de serviço individuais diretamente no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-220">If you do not use the WCF-based proxy assembly or add a proxy file for a PSI service, you can set one or more individual service references directly in Visual Studio.</span></span> <span data-ttu-id="8dc6b-221">Você também pode usar a etapa 1 do procedimento a seguir para criar arquivos de proxy atualizados, para preparar o `Documentation\IntelliSense\WCF\GenWCFProxyAssembly.cmd` script ou seja incluído no download do SDK do Project 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-221">You can also use step 1 of the following procedure to create updated proxy files, to prepare for the  `Documentation\IntelliSense\WCF\GenWCFProxyAssembly.cmd` script that is included in the Project 2013 SDK download.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="8dc6b-222">Para definir uma referência de serviço, você deve usar o Visual Studio no computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-222">To set a service reference, you must use Visual Studio on the Project Server computer.</span></span> <span data-ttu-id="8dc6b-223">Recomendamos que você use o assembly de proxy ProjectServerServices.dll ou adiciona arquivos de origem de proxy, em vez de diretamente adicionando referências de serviço no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-223">We recommend that you use the ProjectServerServices.dll proxy assembly or add proxy source files, instead of directly adding service references in Visual Studio.</span></span> 
  
<span data-ttu-id="8dc6b-224">As etapas a seguir mostram como definir uma referência de serviço usando o Visual Studio 2012 em um computador executando uma instalação de teste do Project Server:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-224">The following steps show how to set a service reference by using Visual Studio 2012 on a computer running a test installation of Project Server:</span></span>
  
1. <span data-ttu-id="8dc6b-225">Para obter acesso aos serviços WCF back-end, execute o Visual Studio no computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-225">To get access to the back-end WCF services, run Visual Studio on the Project Server computer.</span></span>
    
2. <span data-ttu-id="8dc6b-226">No **Solution Explorer**, clique com botão direito na pasta **referências** e escolha **Adicionar referência de serviço**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-226">In **Solution Explorer**, right-click the **References** folder, and then choose **Add Service Reference**.</span></span> 
    
3. <span data-ttu-id="8dc6b-227">Na caixa de diálogo **Adicionar referência de serviço** , na caixa de texto **endereço** , digite http://localhost:32843/ . svc do _GUID_/psi/ _ServiceName_e pressione **Enter**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-227">In the **Add Service Reference** dialog box, in the **Address** text box, type http://localhost:32843/ _GUID_/psi/ _ServiceName_.svc, and then press **Enter**.</span></span> <span data-ttu-id="8dc6b-228">Substitua o _GUID_ com o nome do diretório virtual do aplicativo de serviço do Project Server, como 534c37eb00d74ccfadcecf9827e95239.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-228">Replace  _GUID_ with the virtual directory name of the Project Server service application, such as 534c37eb00d74ccfadcecf9827e95239.</span></span> <span data-ttu-id="8dc6b-229">Substitua _ServiceName_ o nome do serviço, como o recurso (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-229">Replace  _ServiceName_ with the name of the service, such as Resource (see Figure 3).</span></span> 
    
   <span data-ttu-id="8dc6b-230">Você pode obter o nome do diretório virtual do serviço do Project Server em uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-230">You can get the name of the Project Server Service virtual directory in one of the following ways:</span></span>
    
   - <span data-ttu-id="8dc6b-231">Abra o aplicativo de Administração Central do SharePoint 2013 no seu navegador.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-231">Open the SharePoint 2013 Central Administration application in your browser.</span></span> <span data-ttu-id="8dc6b-232">Escolha **Gerenciar aplicativos de serviço**e escolha o aplicativo de serviço do Project Server PSI desejado.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-232">Choose **Manage service applications**, and then choose the Project Server PSI Service application that you want.</span></span> <span data-ttu-id="8dc6b-233">Por exemplo, escolha **ProjectServerService**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-233">For example, choose **ProjectServerService**.</span></span> <span data-ttu-id="8dc6b-234">A URL da página Gerenciar Project Web App Sites contém o nome do diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-234">The URL of the Manage Project Web App Sites page contains the virtual directory name.</span></span> <span data-ttu-id="8dc6b-235">Por exemplo, em `http://ServerName:8080/_admin/pwa/managepwa.aspx?appid=534c37eb-00d7-4ccf-adce-cf9827e95239`, é o nome do diretório virtual `534c37eb00d74ccfadcecf9827e95239` (o nome do diretório não contém nenhum traços).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-235">For example, in  `http://ServerName:8080/_admin/pwa/managepwa.aspx?appid=534c37eb-00d7-4ccf-adce-cf9827e95239`, the virtual directory name is  `534c37eb00d74ccfadcecf9827e95239` (the directory name contains no dashes).</span></span> 
    
   - <span data-ttu-id="8dc6b-236">Abra a caixa de diálogo **Gerenciador de serviços de informações da Internet (IIS)** no computador do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-236">Open the **Internet Information Services (IIS) Manager** dialog box on the Project Server computer.</span></span> <span data-ttu-id="8dc6b-237">Expanda o nó **Serviços Web do SharePoint** no painel **conexões** e os diretórios virtuais do serviço abaixo, expanda até encontrar o diretório que inclui uma pasta PSI.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-237">Expand the **SharePoint Web Services** node in the **Connections** pane, and then expand the service virtual directories below that, until you find the directory that includes a PSI folder.</span></span> <span data-ttu-id="8dc6b-238">Selecione o diretório, escolha **Configurações avançadas** no painel **ações** e copie o nome do diretório no campo **Caminho Virtual** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-238">Select the directory, choose **Advanced Settings** in the **Actions** pane, and then copy the directory name in the **Virtual Path** field.</span></span> 
    
      > [!NOTE]
      > <span data-ttu-id="8dc6b-239">Pode haver mais de um diretório virtual do serviço do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-239">There can be more than one Project Server Service virtual directory.</span></span> <span data-ttu-id="8dc6b-240">Certifique-se de que você escolha o diretório virtual que contém a instância do Project Web App desejado.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-240">Ensure that you choose the virtual directory that contains the Project Web App instance that you want.</span></span> 
  
   - <span data-ttu-id="8dc6b-241">Use o cmdlet **get-SPServiceApplication** no Windows PowerShell que é instalado com o SharePoint 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-241">Use the **get-SPServiceApplication** cmdlet in Windows PowerShell that is installed with SharePoint 2013.</span></span> <span data-ttu-id="8dc6b-242">No menu **Iniciar** da barra de tarefas, escolha **Todos os programas**, escolha **Produtos Microsoft SharePoint 2013**e, em seguida, escolha **Shell de gerenciamento do SharePoint 2013**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-242">On the taskbar **Start** menu, choose **All Programs**, choose **Microsoft SharePoint 2013 Products**, and then choose **SharePoint 2013 Management Shell**.</span></span> <span data-ttu-id="8dc6b-243">A seguir é o comando e os resultados na janela do **Shell de gerenciamento do SharePoint 2013get -** para os aplicativos de serviço definidos (seus GUIDs serão diferentes).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-243">Following is the command and the results in the **SharePoint 2013get- Management Shell** window for the defined service applications (your GUIDs will be different).</span></span> <span data-ttu-id="8dc6b-244">Copie o GUID para o aplicativo de serviço do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-244">Copy the GUID for the Project Server service application.</span></span> 
    
        ```powershell
            PS > get-SPServiceApplication
            DisplayName          TypeName             Id
            -----------          --------             --
            State Service        State Service        04041cfa-4ab3-4473-8bc8-3967b02eff39
            ProjectServerSer...  Project Server PS... 534c37eb-00d7-4ccf-adce-cf9827e95239
            Security Token Se... Security Token Se... 7243732e-edea-405d-8cc8-1716b99faef5
            Application Disco... Application Disco... 3bfbdeb0-bc20-4a21-801c-cc6f1ce6c643
            SharePoint Server... SharePoint Server... 09912f49-3b72-462f-a44c-6533b578286a  
        ```

      <span data-ttu-id="8dc6b-245">Se você souber o nome completo do aplicativo de serviço do Project Server, você pode usá-lo para obter o valor GUID, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-245">If you know the full name of the Project Server Service application, you can use it to get the GUID value, for example:</span></span>
    
        ```powershell
        PS > $projectService = "ProjectServerService"
        PS > (get-SPServiceApplication -Name $projectService).Id
        Guid
        ----
        534c37eb-00d7-4ccf-adce-cf9827e95239
       ```

      > [!NOTE]
      > <span data-ttu-id="8dc6b-246">Remova os hífens na GUID para obter o nome do diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-246">Remove the dashes in the GUID to get the virtual directory name.</span></span> 
  
   <span data-ttu-id="8dc6b-247">URLs como `http://localhost:32843/534c37eb00d74ccfadcecf9827e95239/PSI/Resource.svc` são padrão para serviços do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-247">URLs such as  `http://localhost:32843/534c37eb00d74ccfadcecf9827e95239/PSI/Resource.svc` are standard for Project Server services.</span></span> 
    
4. <span data-ttu-id="8dc6b-248">Depois que a referência de serviço resolve, digite o nome de referência na caixa de texto de **Namespace** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-248">After the service reference resolves, type the reference name in the **Namespace** text box.</span></span> <span data-ttu-id="8dc6b-249">Exemplos de código na documentação do desenvolvedor do Project 2013 usam o nome do namespace arbitrário **Svc _ServiceName_**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-249">Code examples in the Project 2013 developer documentation use the arbitrary namespace name **Svc _ServiceName_**.</span></span> <span data-ttu-id="8dc6b-250">Por exemplo, o serviço de recursos nos exemplos de código é nomeado **SvcResource**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-250">For example, the Resource service in the code examples is named **SvcResource**.</span></span>
    
    <span data-ttu-id="8dc6b-251">**Figura 3. Adicionando a referência de serviço de recursos com base em WCF**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-251">**Figure 3. Adding the WCF-based Resource service reference**</span></span>

    <span data-ttu-id="8dc6b-252">![Adicionando a referência de serviço de recursos com base em WCF] (media/pj15_PrerequisitesWCF_AddSvcReference.gif "Adicionando a referência de serviço de recursos com base em WCF")</span><span class="sxs-lookup"><span data-stu-id="8dc6b-252">![Adding the WCF-based Resource service reference](media/pj15_PrerequisitesWCF_AddSvcReference.gif "Adding the WCF-based Resource service reference")</span></span>
  
5. <span data-ttu-id="8dc6b-253">Substitua o arquivo Web. config temporário no diretório de serviço do projeto original (renomeado no Web. config) e, em seguida, execute novamente `iisreset`.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-253">Replace the temporary web.config file in the Project Service directory with the original (renamed to web.config), and then rerun  `iisreset`.</span></span>
    
## <a name="setting-other-references"></a><span data-ttu-id="8dc6b-254">A definição de outras referências</span><span class="sxs-lookup"><span data-stu-id="8dc6b-254">Setting other references</span></span>
<span data-ttu-id="8dc6b-255"><a name="pj15_PrerequisitesWCF_OtherReferences"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-255"></span></span>

<span data-ttu-id="8dc6b-256">Aplicativos do Project Server frequentemente usam outros serviços, como serviços web do SharePoint 2013.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-256">Project Server applications often use other services, such as SharePoint 2013 web services.</span></span> <span data-ttu-id="8dc6b-257">Se outros serviços ou referências forem necessárias, elas são mencionadas no exemplo de código.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-257">If other services or references are required, they are noted in the code example.</span></span>
  
<span data-ttu-id="8dc6b-258">Referências locais para o exemplo de código são listadas em instruções **using** na parte superior da amostra.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-258">Local references for the code sample are listed in **using** statements at the top of the sample.</span></span> 
  
1. <span data-ttu-id="8dc6b-259">No **Solution Explorer**, clique com botão direito na pasta **referências** e escolha **Adicionar referência**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-259">In **Solution Explorer**, right-click the **References** folder, and then choose **Add Reference**.</span></span>
    
2. <span data-ttu-id="8dc6b-260">Escolha **Procurar**e navegue até o local onde você armazenou DLLs do servidor do projeto que você copiou anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-260">Choose **Browse**, and then browse to the location where you stored the Project Server DLLs that you copied previously.</span></span> <span data-ttu-id="8dc6b-261">Escolha as DLLs desejado e escolha **Okey**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-261">Choose the DLLs that you want, and then choose **OK**.</span></span>
    
> [!NOTE]
> <span data-ttu-id="8dc6b-262">Certifique-se de que as versões de montagem no computador de desenvolvimento correspondem exatamente aqueles no computador do Project Server de destino.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-262">Ensure that the assembly versions on your development computer exactly match those on the target Project Server computer.</span></span> 
  
## <a name="adding-a-service-configuration-file"></a><span data-ttu-id="8dc6b-263">Adicionando um arquivo de configuração de serviço</span><span class="sxs-lookup"><span data-stu-id="8dc6b-263">Adding a service configuration file</span></span>
<span data-ttu-id="8dc6b-264"><a name="pj15_PrerequisitesWCF_AddConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-264"></span></span>

<span data-ttu-id="8dc6b-265">Se um aplicativo programaticamente configura os serviços WCF, ele não usa um arquivo de configuração do serviço.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-265">If an application programmatically configures the WCF services, it does not use a service configuration file.</span></span> <span data-ttu-id="8dc6b-266">Caso contrário, um aplicativo do Windows ou um aplicativo de console usa o elemento **ServiceModel** em um arquivo de App; um aplicativo web inclui **ServiceModel** no Web. config. Para obter mais informações sobre como usar um arquivo App. config ou programaticamente Configurando os serviços WCF, consulte [passo a passo: aplicativos de PSI desenvolvendo usando o WCF](http://msdn.microsoft.com/library/65707234-c3da-44e4-8364-32a6be28f645%28Office.15%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-266">Otherwise, a Windows application or console application uses the **system.serviceModel** element in an app.config file; a web application includes **system.serviceModel** in web.config. For more information about using an app.config file or programmatically configuring the WCF services, see [Walkthrough: Developing PSI applications using WCF](http://msdn.microsoft.com/library/65707234-c3da-44e4-8364-32a6be28f645%28Office.15%29.aspx).</span></span>
  
<span data-ttu-id="8dc6b-267">Quando ele gera um arquivo de origem do proxy de serviço, o comando SvcUtil.exe também cria um arquivo que é a base para o elemento de **ServiceModel** padrão em um arquivo de App Output ou o arquivo Web. config.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-267">When it generates a service proxy source file, the SvcUtil.exe command also creates an output.config file that is the basis for the default **system.serviceModel** element in an app.config file or web.config file.</span></span> <span data-ttu-id="8dc6b-268">O download do SDK do Project 2013 inclui um arquivo de Output amostra em `Documentation\IntelliSense\WCF\Source.zip`.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-268">The Project 2013 SDK download includes a sample output.config file in  `Documentation\IntelliSense\WCF\Source.zip`.</span></span> <span data-ttu-id="8dc6b-269">Por exemplo, Output arquivo padrão que cria SvcUtil.exe para o serviço de recurso inclui duas ligações, denominadas **BasicHttpBinding_Resource** e **BasicHttpBinding_Resource1**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-269">For example, the default output.config file that SvcUtil.exe creates for the Resource service includes two bindings, named **BasicHttpBinding_Resource** and **BasicHttpBinding_Resource1**.</span></span> <span data-ttu-id="8dc6b-270">O elemento do **cliente** inclui dois pontos de extremidade padrão.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-270">The **client** element includes two default endpoints.</span></span> <span data-ttu-id="8dc6b-271">Um ponto de extremidade é para o acesso seguro para o endereço HTTP na porta 32843 e a outra é para acesso normal na porta 32843, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-271">One endpoint is for the secure access to the HTTP address on port 32843 and the other is for normal access on port 32843, as follows:</span></span> 
  
```XML
<client>
    <endpoint address="http://ServerName.domain:32843/GUID/PSI/Resource.svc/secure"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Resource"
        contract="SvcResource.Resource" name="BasicHttpBinding_Resource" />
address="http://ServerName.domain:32843/GUID/PSI/Resource.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Resource1"
        contract="SvcResource.Resource" name="BasicHttpBinding_Resource1" />
</client>
```

<span data-ttu-id="8dc6b-272">Configuração do serviço PSI não usa as vinculações padrão e pontos de extremidade.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-272">PSI service configuration does not use the default bindings and endpoints.</span></span> <span data-ttu-id="8dc6b-273">Project Server requer que aplicativos acessar serviços PSI por meio de ProjectServer.svc o front-end, que atua como um roteador de chamadas para os serviços de back-end.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-273">Project Server requires that applications access PSI services through the front-end ProjectServer.svc, which acts as a router for calls to the back-end services.</span></span> <span data-ttu-id="8dc6b-274">Para criar o arquivo App, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-274">To create the app.config file, do the following steps:</span></span>
  
1. <span data-ttu-id="8dc6b-275">Se você define uma referência para o assembly de proxy ProjectServerServices.dll ou adiciona o arquivo de origem de proxy para um serviço, o aplicativo não contém um arquivo App. config.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-275">If you set a reference to the ProjectServerServices.dll proxy assembly, or add the proxy source file for a service, the application does not contain an app.config file.</span></span> <span data-ttu-id="8dc6b-276">Adicione um novo item ao projeto do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-276">Add a new item to the Visual Studio project.</span></span> <span data-ttu-id="8dc6b-277">Na caixa de diálogo **Adicionar Novo Item** , selecione o modelo de **Arquivo de configuração de aplicativo** , nomeie-App. config e escolha **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-277">In the **Add New Item** dialog box, choose the **Application Configuration File** template, name it app.config, and then choose **Add**.</span></span>
    
2. <span data-ttu-id="8dc6b-278">Exclua todo o texto no arquivo App. config XML e copie o código a seguir para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-278">Delete all text in the app.config file, and then copy the following code into the file.</span></span> <span data-ttu-id="8dc6b-279">Você pode usar a mesma associação, por exemplo `basicHttpConf`, para cada ponto de extremidade de serviço.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-279">You can use the same binding, for example  `basicHttpConf`, for each service endpoint.</span></span> <span data-ttu-id="8dc6b-280">Se você quiser usar mais de uma associação, por exemplo, para vincular os protocolos HTTP e HTTPS, você deve criar uma ligação para cada protocolo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-280">If you want to use more than one binding, for example, to bind both HTTP and HTTPS protocols, you must create a binding for each protocol.</span></span>
    
    ```XML
        <?xml version="1.0" encoding="utf-8" ?>
        <configuration>
            <system.serviceModel>
                <behaviors>
                    <endpointBehaviors>
                        <behavior name="basicHttpBehavior">
                            <clientCredentials>
                                <windows allowedImpersonationLevel="Impersonation" />
                            </clientCredentials>
                        </behavior>
                    </endpointBehaviors>
                </behaviors>
                <bindings>
                    <basicHttpBinding>
                        <binding name="basicHttpConf" sendTimeout="01:00:00" 
                            maxBufferSize="500000000" maxReceivedMessageSize="500000000">
                            <readerQuotas maxDepth="32" maxStringContentLength="8192" 
                                maxArrayLength="16384" maxBytesPerRead="4096" 
                                maxNameTableCharCount="500000000" />
                            <security mode="TransportCredentialOnly">
                                <transport clientCredentialType="Ntlm" realm="http://SecurityDomain" />
                            </security>
                        </binding>
                    </basicHttpBinding>
                </bindings>
                <client>
                    <endpoint address="http://ServerName/ProjectServerName/_vti_bin/PSI/ProjectServer.svc"
                        behaviorConfiguration="basicHttpBehavior" binding="basicHttpBinding"
                        bindingConfiguration="basicHttpConf" 
                        contract="SvcServiceName.ServiceName"
                        name="basicHttp_ServiceName" />
                </client>
            </system.serviceModel>
        </configuration>
    ```

3. <span data-ttu-id="8dc6b-281">Substituir `ServerName/ProjectServerName` no endereço do ponto de extremidade do cliente com o nome do seu servidor e a instância do Project Web App.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-281">Replace  `ServerName/ProjectServerName` in the client endpoint address with the name of your server and Project Web App instance.</span></span> 
    
4. <span data-ttu-id="8dc6b-282">Substituir `ServiceName` com o nome do serviço PSI, como o recurso.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-282">Replace  `ServiceName` with the name of the PSI service, such as Resource.</span></span> <span data-ttu-id="8dc6b-283">Certifique-se de que você substitua todas as instâncias de três do nome do serviço, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-283">Ensure that you replace all three instances of the service name, for example:</span></span>
    
    ```XML
        <endpoint address="http://myserver/pwa/_vti_bin/PSI/ProjectServer.svc"
            behaviorConfiguration="basicHttpBehavior" binding="basicHttpBinding"
            bindingConfiguration="basicHttpConf" 
            contract="SvcResource.Resource"
            name="basicHttp_Resource" />
    ```

5. <span data-ttu-id="8dc6b-284">Para usar mais do que o serviço de um PSI, crie um elemento de **ponto de extremidade** para cada serviço e para cada elemento de **ligação** que usa o serviço.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-284">To use more than one PSI service, create one **endpoint** element for each service, and for each **binding** element that service uses.</span></span> <span data-ttu-id="8dc6b-285">Por exemplo, os seguintes pontos de extremidade configurar o cliente para usar a ligação HTTP básica para o serviço do Project e o serviço QueueSystem.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-285">For example, the following endpoints configure the client to use the basic HTTP binding for the Project service and the QueueSystem service.</span></span> 
    
    > [!NOTE]
    > <span data-ttu-id="8dc6b-286">Se você executa um aplicativo e obter um erro se o servidor está muito ocupado ou que a solicitação HTTP é autorizada, certifique-se de que os endereços de ponto de extremidade estão corretos no arquivo App. config XML.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-286">If you run an application and get an error that the server is too busy, or that the HTTP request is unauthorized, ensure that the endpoint addresses are correct in the app.config file.</span></span> 
  
    ```XML
        <client>
        <endpoint address="http://ServerName/pwa/_vti_bin/PSI/ProjectServer.svc"
            behaviorConfiguration="basicHttpBehavior" binding="basicHttpBinding"
            bindingConfiguration="basicHttpConf" 
            contract="SvcProject.Project"
            name="basicHttp_Project" />
        <endpoint address="http://ServerName/pwa/_vti_bin/PSI/ProjectServer.svc"
            behaviorConfiguration="basicHttpBehavior" binding="basicHttpBinding"
            bindingConfiguration="basicHttpConf" 
            contract="SvcQueueSystem.QueueSystem"
            name="basicHttp_QueueSystem" />
        </client>
    ```

<span data-ttu-id="8dc6b-287">Você pode editar um arquivo App. config, usando o **Editor de configuração do serviço WCF** no Visual Studio (no menu **Ferramentas** ).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-287">You can edit an app.config file by using the **WCF Service Configuration Editor** in Visual Studio (on the **Tools** menu).</span></span> <span data-ttu-id="8dc6b-288">Figura 4 mostra como definir o elemento de **contrato** na caixa de diálogo **Editor de configuração de serviço do Microsoft** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-288">Figure 4 shows how to set the **contract** element in the **Microsoft Service Configuration Editor** dialog box.</span></span> <span data-ttu-id="8dc6b-289">Se a solução está usando o assembly de proxy PSI, abra ProjectServerServices.dll no `bin\debug` diretório da solução Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-289">If the solution is using the PSI proxy assembly, open ProjectServerServices.dll in the  `bin\debug` directory of the Visual Studio solution.</span></span> <span data-ttu-id="8dc6b-290">A caixa de diálogo de **Navegador do tipo de contrato** mostra todos os contratos de serviço WCF (consulte a Figura 5).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-290">The **Contract Type Browser** dialog box shows all of the WCF service contracts (see Figure 5).</span></span> 
  
<span data-ttu-id="8dc6b-291">**Figura 4. Usando o Editor de configuração do serviço WCF**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-291">**Figure 4. Using the WCF Service Configuration Editor**</span></span>

<span data-ttu-id="8dc6b-292">![Usando o Editor de configuração do serviço WCF] (media/pj15_PrerequisitesWCF_ServiceConfigurationEditor.gif "Usando o Editor de configuração do serviço WCF")</span><span class="sxs-lookup"><span data-stu-id="8dc6b-292">![Using the WCF Service Configuration Editor](media/pj15_PrerequisitesWCF_ServiceConfigurationEditor.gif "Using the WCF Service Configuration Editor")</span></span>
  
<span data-ttu-id="8dc6b-293">Se a solução está usando um arquivo de proxy de serviço, como wcfResource.cs, compilar o aplicativo e abra o arquivo executável no `bin\debug` directory.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-293">If the solution is using a service proxy file, such as wcfResource.cs, compile the application and then open the executable file in the  `bin\debug` directory.</span></span> <span data-ttu-id="8dc6b-294">Para obter mais informações sobre como editar o arquivo App, consulte [passo a passo: aplicativos de PSI desenvolvendo usando o WCF](http://msdn.microsoft.com/library/65707234-c3da-44e4-8364-32a6be28f645%28Office.15%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-294">For more information about editing the app.config file, see [Walkthrough: Developing PSI applications using WCF](http://msdn.microsoft.com/library/65707234-c3da-44e4-8364-32a6be28f645%28Office.15%29.aspx).</span></span>
  
<span data-ttu-id="8dc6b-295">**Figura 5. Usando o navegador de tipo de contrato no Editor de configuração de serviço do WCF**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-295">**Figure 5. Using the Contract Type Browser in the WCF Service Configuration Editor**</span></span>

<span data-ttu-id="8dc6b-296">![Usando o navegador do tipo de contrato] (media/pj15_PrerequisitesWCF_ContractTypeBrowser.gif "Usando o navegador do tipo de contrato")</span><span class="sxs-lookup"><span data-stu-id="8dc6b-296">![Using the Contract Type Browser](media/pj15_PrerequisitesWCF_ContractTypeBrowser.gif "Using the Contract Type Browser")</span></span>
  
## <a name="using-multiple-authentication"></a><span data-ttu-id="8dc6b-297">Usando a autenticação de vários</span><span class="sxs-lookup"><span data-stu-id="8dc6b-297">Using multiple authentication</span></span>
<span data-ttu-id="8dc6b-298"><a name="pj15_PrerequisitesWCF_ClaimsMultiAuth"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-298"></span></span>

<span data-ttu-id="8dc6b-299">Autenticação de usuários do Project Server no local, pela autenticação do Windows ou a autenticação de formulários, é feita por meio de declarações de processamento no SharePoint.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-299">Authentication of on-premises Project Server users, whether by Windows authentication or Forms authentication, is done through claims processing in SharePoint.</span></span> <span data-ttu-id="8dc6b-300">Autenticação de vários significa que o aplicativo web no qual o Project Web App é provisionado suporta a autenticação do Windows e autenticação baseada em formulários.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-300">Multiple authentication means that the web application on which Project Web App is provisioned supports both Windows authentication and Forms-based authentication.</span></span> <span data-ttu-id="8dc6b-301">Se for esse o caso, qualquer chamada para um serviço WCF que usa a autenticação do Windows irá falhar com o seguinte erro, porque o processo de declarações não consegue determinar qual tipo de usuário para autenticar:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-301">If that is the case, any call to a WCF service that uses Windows authentication will fail with the following error, because the claims process cannot determine which type of user to authenticate:</span></span>
  
`The server was unable to process the request due to an internal error. For more information about the error, either turn on Include ExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.`

<span data-ttu-id="8dc6b-302">Para corrigir o problema para WCF, todas as chamadas para os métodos PSI devem estar dentro um **OperationContextScope** que é definido para cada serviço PSI.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-302">To fix the problem for WCF, all calls to PSI methods should be within an **OperationContextScope** that is defined for each PSI service.</span></span> <span data-ttu-id="8dc6b-303">Não aninhar escopos para vários serviços; Por exemplo, ao usar as chamadas para os serviços de recurso e projeto, cada conjunto de chamadas deve ser dentro de seu próprio escopo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-303">Do not nest scopes for multiple services; for example, when using calls to the Resource and Project services, each set of calls should be within its own scope.</span></span> 
  
<span data-ttu-id="8dc6b-304">No exemplo a seguir, o método **DisableFormsAuth** pode ser chamado a partir de cada seção **OperationContextScope** em um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-304">In the following example, the **DisableFormsAuth** method can be called from every **OperationContextScope** section in an application.</span></span> <span data-ttu-id="8dc6b-305">O método remove qualquer valor de cabeçalho que desabilitado anteriormente a autenticação de formulários, para a autenticação de formulários pode continuar se o parâmetro _isWindowsAuth_ for **false**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-305">The method removes any header value that previously disabled Forms authentication, so that Forms authentication can proceed if the  _isWindowsAuth_ parameter is **false**.</span></span> <span data-ttu-id="8dc6b-306">Se _isWindowsAuth_ for **true**, o método **DisableFormsAuth** desabilitará a autenticação de formulários.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-306">If  _isWindowsAuth_ is **true**, the **DisableFormsAuth** method disables Forms authentication.</span></span> 
  
<span data-ttu-id="8dc6b-307">No método **WcfSample** , o objeto **projectClient** é uma instância da classe PSI **SvcProject.ProjectClient** .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-307">In the **WcfSample** method, the **projectClient** object is an instance of the PSI **SvcProject.ProjectClient** class.</span></span> 
  
```cs
// Class variable that determines whether to disable Forms authentication.
private bool isWindowsUser = true;
public void DisableFormsAuth(bool isWindowsAuth)
{
    WebOperationContext.Current.OutgoingRequest.Headers.Remove(
        "X-FORMS_BASED_AUTH_ACCEPTED");
    if (isWindowsAuth)
    {
        // Disable Forms authentication, to enable Windows authentication.
        WebOperationContext.Current.OutgoingRequest.Headers.Add(
            "X-FORMS_BASED_AUTH_ACCEPTED", "f");
    }
}
private void WcfSample()
{
    // Limit the scope of WCF calls to the client channel. 
    using (OperationContextScope scope = new OperationContextScope(projectClient.InnerChannel))
    {
        // Add a web request header to enable Windows authentication in 
        // multiple authentication installations.
        DisableFormsAuth(isWindowsUser);
        // Add calls to the projectClient methods here:
        // . . .
    }
}
```

> [!NOTE]
> <span data-ttu-id="8dc6b-308">Fazendo chamadas PSI dentro de um **OperationContextScope** é necessário apenas para aplicativos que são executados em um ambiente de autenticação múltiplos.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-308">Making PSI calls within an **OperationContextScope** is required only for applications that run in a multiple authentication environment.</span></span> <span data-ttu-id="8dc6b-309">Se o Project Server usa a autenticação do Windows, não é necessário definir um escopo e adicionar um cabeçalho de solicitação da web que desabilita a autenticação de formulários.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-309">If Project Server uses only Windows authentication, it is not necessary to set a scope and add a web request header that disables Forms authentication.</span></span> 
> 
> <span data-ttu-id="8dc6b-310">A correção para um aplicativo baseado em ASMX é diferente.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-310">The fix for an ASMX-based application is different.</span></span> <span data-ttu-id="8dc6b-311">Para obter mais informações, consulte a seção de *autenticação usando vários* em [pré-requisitos para amostras de código com base em ASMX no projeto](prerequisites-for-asmx-based-code-samples-in-project.md).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-311">For more information, see the  *Using multiple-authentication*  section in [Prerequisites for ASMX-based code samples in Project](prerequisites-for-asmx-based-code-samples-in-project.md).</span></span> 
  
## <a name="changing-values-of-generic-constants"></a><span data-ttu-id="8dc6b-312">Alterando os valores das constantes genéricos</span><span class="sxs-lookup"><span data-stu-id="8dc6b-312">Changing values of generic constants</span></span>
<span data-ttu-id="8dc6b-313"><a name="pj15_PrerequisitesWCF_ChangeValues"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-313"></span></span>

<span data-ttu-id="8dc6b-314">A maioria das amostras têm uma ou mais variáveis que precisam ser atualizados para o exemplo funcione corretamente no seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-314">Most samples have one or more variables that you must update for the sample to work properly in your environment.</span></span> <span data-ttu-id="8dc6b-315">No exemplo a seguir, se você tiver SSL instalado, use o protocolo HTTPS, em vez do protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-315">In the following example, if you have SSL installed, use the HTTPS protocol instead of the HTTP protocol.</span></span> <span data-ttu-id="8dc6b-316">Substitua _ServerName_ com o nome do servidor que você está usando.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-316">Replace  _ServerName_ with the name of the server that you are using.</span></span> <span data-ttu-id="8dc6b-317">Substitua _ProjectServerName_ com o nome do diretório virtual do seu site do project server, como o PWA.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-317">Replace  _ProjectServerName_ with the virtual directory name of your project server site, such as PWA.</span></span> 
  
```cs
const string PROJECT_SERVER_URI = "http://ServerName/ProjectServerName/";
```

<span data-ttu-id="8dc6b-318">Outras variáveis que você deve alterar são indicados na parte superior do exemplo de código.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-318">Any other variables that you must change are noted at the top of the code example.</span></span>
  
## <a name="verifying-the-results"></a><span data-ttu-id="8dc6b-319">Verificando os resultados</span><span class="sxs-lookup"><span data-stu-id="8dc6b-319">Verifying the results</span></span>
<span data-ttu-id="8dc6b-320"><a name="pj15_PrerequisitesWCF_Verify"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-320"></span></span>

<span data-ttu-id="8dc6b-321">Obtendo e interpretando os resultados de um exemplo de código nem sempre são simples.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-321">Getting and interpreting results from a code sample is not always straightforward.</span></span> <span data-ttu-id="8dc6b-322">Por exemplo, se você criar um projeto, você deve publicar o projeto antes que pode aparecer na página Central de projetos no Project Web App.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-322">For example, if you create a project, you must publish the project before it can appear on the Project Center page in Project Web App.</span></span>
  
<span data-ttu-id="8dc6b-323">Você pode verificar os resultados de amostra de código de várias maneiras, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-323">You can verify code sample results in several ways, for example:</span></span>
  
- <span data-ttu-id="8dc6b-324">Usar o cliente do Project Professional 2013 para abrir o projeto a partir do computador do Project Server e exibir os itens que você deseja.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-324">Use the Project Professional 2013 client to open the project from the Project Server computer, and view the items that you want.</span></span>
    
- <span data-ttu-id="8dc6b-325">Exibir projetos publicados na página Central de projetos do Project Web App ( `http://ServerName/ProjectServerName/projects.aspx`).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-325">View published projects on the Project Center page of Project Web App ( `http://ServerName/ProjectServerName/projects.aspx`).</span></span>
    
- <span data-ttu-id="8dc6b-326">Exiba o log de fila no Project Web App.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-326">View the Queue log in Project Web App.</span></span> <span data-ttu-id="8dc6b-327">Abra a página Configurações do servidor (escolha o ícone **configurações** no canto superior direito) e escolha **Meus Trabalhos Enfileirados** sob a seção **Configurações pessoais** ( `http://ServerName/ProjectServerName/MyJobs.aspx`).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-327">Open the Server Settings page (choose the **Settings** icon in the top-right corner), and then choose **My Queued Jobs** under the **Personal Settings** section (  `http://ServerName/ProjectServerName/MyJobs.aspx`).</span></span> <span data-ttu-id="8dc6b-328">Na lista suspensa **modo de exibição** , você pode classificar pelo status do trabalho.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-328">In the **View** drop-down list, you can sort by the job status.</span></span> <span data-ttu-id="8dc6b-329">O status padrão está **em andamento e trabalhos com falha da semana anterior**.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-329">The default status is **In Progress and Failed Jobs in the Past Week**.</span></span> 
    
- <span data-ttu-id="8dc6b-330">Use a página Configurações do servidor no Project Web App ( `http://ServerName/ProjectServerName/_layouts/15/pwa/admin/admin.aspx`) para gerenciar todos os trabalhos em fila e excluir ou forçar o check-in de objetos empresariais.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-330">Use the Server Settings page in Project Web App ( `http://ServerName/ProjectServerName/_layouts/15/pwa/admin/admin.aspx`) to manage all queue jobs and delete or force check-in enterprise objects.</span></span> <span data-ttu-id="8dc6b-331">Você deve ter permissões administrativas para acessar esses links na página Configurações do servidor.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-331">You must have administrative permissions to access those links on the Server Settings page.</span></span>
    
- <span data-ttu-id="8dc6b-332">Use o **Microsoft SQL Server Management Studio** para executar uma consulta em uma tabela de um banco de dados do Project Server.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-332">Use **Microsoft SQL Server Management Studio** to run a query on a table of a Project Server database.</span></span> <span data-ttu-id="8dc6b-333">Por exemplo, use a seguinte consulta para selecionar as 200 linhas superiores da tabela MSP_WORKFLOW_STAGE_PDPS para mostrar informações sobre as páginas de detalhes do projeto (PDPs) em estágios do fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-333">For example, use the following query to select the top 200 rows of the MSP_WORKFLOW_STAGE_PDPS table to show information about the project detail pages (PDPs) in workflow stages.</span></span> 
    
```sql
        SELECT TOP 200 [STAGE_UID]
                ,[PDP_UID]
                ,[PDP_NAME]
                ,[PDP_POSITION]
                ,[PDP_ID]
                ,[PDP_STAGE_DESCRIPTION]
                ,[PDP_REQUIRES_ATTENTION]
        FROM [ProjectService].[pub].[MSP_WORKFLOW_STAGE_PDPS]
```

## <a name="cleaning-up"></a><span data-ttu-id="8dc6b-334">Limpando</span><span class="sxs-lookup"><span data-stu-id="8dc6b-334">Cleaning up</span></span>
<span data-ttu-id="8dc6b-335"><a name="pj15_PrerequisitesWCF_Cleanup"> </a></span><span class="sxs-lookup"><span data-stu-id="8dc6b-335"></span></span>

<span data-ttu-id="8dc6b-336">Após testar alguns exemplos de códigos, existem objetos da empresa e as configurações que devem ser excluídas ou redefinir.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-336">After you test some code samples, there are enterprise objects and settings that should be deleted or reset.</span></span> <span data-ttu-id="8dc6b-337">Você pode usar a página Configurações do servidor no Project Web App para gerenciar dados da empresa ( `http://ServerName/ProjectServerName/_layouts/15/pwa/admin/admin.aspx`).</span><span class="sxs-lookup"><span data-stu-id="8dc6b-337">You can use the Server Settings page in Project Web App to manage enterprise data ( `http://ServerName/ProjectServerName/_layouts/15/pwa/admin/admin.aspx`).</span></span> <span data-ttu-id="8dc6b-338">Links na página Configurações do servidor permitem excluir itens antigos, forçar o check-in de projetos, gerenciar a fila de trabalho para todos os usuários e realizar outras tarefas administrativas.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-338">Links on the Server Settings page enable you to delete old items, force check-in projects, manage the job queue for all users, and perform other administrative tasks.</span></span>
  
<span data-ttu-id="8dc6b-339">A seguir estão alguns dos links na página Configurações do servidor a ser usado para atividades de limpeza típica após a execução de códigos de exemplo:</span><span class="sxs-lookup"><span data-stu-id="8dc6b-339">Following are some of the links on the Server Settings page to use for typical cleanup activities after running code samples:</span></span>
  
- <span data-ttu-id="8dc6b-340">**Campos personalizados da empresa e tabelas de pesquisa**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-340">**Enterprise Custom Fields and Lookup Tables**</span></span>
    
- <span data-ttu-id="8dc6b-341">**Gerenciar trabalhos em fila**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-341">**Manage Queue Jobs**</span></span>
    
- <span data-ttu-id="8dc6b-342">**Excluir objetos da empresa**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-342">**Delete Enterprise Objects**</span></span>
    
- <span data-ttu-id="8dc6b-343">**Forçar o Check in de objetos empresariais**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-343">**Force Check-in Enterprise Objects**</span></span>
    
- <span data-ttu-id="8dc6b-344">**Tipos de projeto corporativo**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-344">**Enterprise Project Types**</span></span>
    
- <span data-ttu-id="8dc6b-345">**Fases do fluxo de trabalho**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-345">**Workflow Phases**</span></span>
    
- <span data-ttu-id="8dc6b-346">**Estágios do fluxo de trabalho**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-346">**Workflow Stages**</span></span>
    
- <span data-ttu-id="8dc6b-347">**Páginas de detalhes do projeto**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-347">**Project Detail Pages**</span></span>
    
- <span data-ttu-id="8dc6b-348">**Períodos de relatório**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-348">**Time Reporting Periods**</span></span>
    
- <span data-ttu-id="8dc6b-349">**Configurações de quadro de horários e padrões**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-349">**Timesheet Settings and Defaults**</span></span>
    
- <span data-ttu-id="8dc6b-350">**Classificações de linha**</span><span class="sxs-lookup"><span data-stu-id="8dc6b-350">**Line Classifications**</span></span>
    
<span data-ttu-id="8dc6b-351">Configurações adicionais são gerenciadas pelo SharePoint Server 2013 para cada instância do Project Web App, em vez de uma página específica de configurações de servidor do Project Web App.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-351">Additional settings are managed by SharePoint Server 2013 for each Project Web App instance, rather than by a specific Project Web App Server Settings page.</span></span> <span data-ttu-id="8dc6b-352">No aplicativo Administração Central do SharePoint, escolha **Configurações gerais de aplicativos**, escolha **Gerenciar** em **Configurações do Project Server**e, em seguida, escolha a instância do Project Web App na lista suspensa na página Configurações do servidor .</span><span class="sxs-lookup"><span data-stu-id="8dc6b-352">In the SharePoint Central Administration application, choose **General Application Settings**, choose **Manage** under **Project Server Settings**, and then choose the Project Web App instance in the drop-down list on the Server Settings page.</span></span> <span data-ttu-id="8dc6b-353">Por exemplo, escolha **Manipuladores de eventos no servidor** , adicione ou exclua os manipuladores de eventos para a instância do Project Web App selecionada.</span><span class="sxs-lookup"><span data-stu-id="8dc6b-353">For example, choose **Server Side Event Handlers** to add or delete event handlers for the selected Project Web App instance.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="8dc6b-354">Confira também</span><span class="sxs-lookup"><span data-stu-id="8dc6b-354">See also</span></span>

- [<span data-ttu-id="8dc6b-355">Pré-requisitos para amostras de código com base em ASMX no projeto</span><span class="sxs-lookup"><span data-stu-id="8dc6b-355">Prerequisites for ASMX-based code samples in Project</span></span>](prerequisites-for-asmx-based-code-samples-in-project.md)   
- [<span data-ttu-id="8dc6b-356">Passo a passo: Desenvolvendo aplicativos PSI usando o WCF</span><span class="sxs-lookup"><span data-stu-id="8dc6b-356">Walkthrough: Developing PSI applications using WCF</span></span>](http://msdn.microsoft.com/library/65707234-c3da-44e4-8364-32a6be28f645%28Office.15%29.aspx)   
- [<span data-ttu-id="8dc6b-357">Utilizam a representação com WCF</span><span class="sxs-lookup"><span data-stu-id="8dc6b-357">Use Impersonation with WCF</span></span>](http://msdn.microsoft.com/library/e3597901-2f02-44a2-8076-d32aae540b38%28Office.15%29.aspx)  
- [<span data-ttu-id="8dc6b-358">Visão geral da referência PSI do Project</span><span class="sxs-lookup"><span data-stu-id="8dc6b-358">Project PSI reference overview</span></span>](project-psi-reference-overview.md) 
- [<span data-ttu-id="8dc6b-359">Central de desenvolvedores do SharePoint</span><span class="sxs-lookup"><span data-stu-id="8dc6b-359">SharePoint Developer Center</span></span>](http://msdn.microsoft.com/en-us/sharepoint/default.aspx)
    

